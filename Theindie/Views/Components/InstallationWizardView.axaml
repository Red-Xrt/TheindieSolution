<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:models="using:Theindie.Models"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:DataType="models:GameInfo"
             x:Class="Theindie.Views.Components.InstallationWizardView">

    <UserControl.Styles>
        <Style Selector="Grid.WizardStep[IsVisible=True]">
            <Style.Animations>
                <Animation Duration="0:0:0.3" Easing="CubicEaseOut" FillMode="Forward">
                    <KeyFrame KeyTime="0:0:0"><Setter Property="Opacity" Value="0"/><Setter Property="TranslateTransform.Y" Value="20"/></KeyFrame>
                    <KeyFrame KeyTime="0:0:0.3"><Setter Property="Opacity" Value="1"/><Setter Property="TranslateTransform.Y" Value="0"/></KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
        <Style Selector="Border.StepDot"><Setter Property="Width" Value="8"/><Setter Property="Height" Value="8"/><Setter Property="CornerRadius" Value="4"/><Setter Property="Background" Value="#333"/><Setter Property="Margin" Value="6"/><Setter Property="Transitions"><Transitions><DoubleTransition Property="Width" Duration="0:0:0.3"/><BrushTransition Property="Background" Duration="0:0:0.3"/></Transitions></Setter></Style>
        <Style Selector="Border.StepDot.Active"><Setter Property="Background" Value="{StaticResource PrimaryRed}"/><Setter Property="Width" Value="24"/></Style>
    </UserControl.Styles>

    <Grid Background="#CC000000">
        <Border Width="750" Height="500" CornerRadius="16" Background="#141414" BorderBrush="#30FFFFFF" BorderThickness="1" BoxShadow="0 30 80 0 #A0000000" ClipToBounds="True">
            <Grid RowDefinitions="60, *, 80">
                <Grid Grid.Row="0" Background="#1A1A1A">
                    <TextBlock Text="TRÌNH CÀI ĐẶT VIỆT HÓA" VerticalAlignment="Center" Margin="30,0" FontWeight="Bold" Foreground="#888" LetterSpacing="1"/>
                    <Button Name="BtnClose" Click="CloseButton_Click" HorizontalAlignment="Right" Width="40" Height="40" Background="Transparent" Foreground="#666" Margin="10,0">
                        <TextBlock Text="✕" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Button>
                </Grid>

                <Panel Grid.Row="1" Margin="40,20">
                    <Grid Name="Step1_Confirm" Classes="WizardStep" IsVisible="True" ColumnDefinitions="220, *">
                        <Border Grid.Column="0" CornerRadius="8" ClipToBounds="True"><Image Source="{Binding ImagePath, Converter={StaticResource BitmapConverter}}" Stretch="UniformToFill"/></Border>
                        <StackPanel Grid.Column="1" Margin="30,10,0,0" Spacing="20">
                            <StackPanel Spacing="5">
                                <TextBlock Text="XÁC NHẬN CÀI ĐẶT" FontSize="12" Foreground="{StaticResource PrimaryRed}" FontWeight="Bold"/>
                                <TextBlock Text="{Binding Title}" FontSize="36" FontWeight="Black" Foreground="White" LineHeight="40"/>
                            </StackPanel>
                            <Border Background="#1A1A1A" CornerRadius="8" Padding="20" BorderBrush="#333" BorderThickness="1">
                                <StackPanel Spacing="10">
                                    <Grid ColumnDefinitions="*,Auto"><TextBlock Text="Phiên bản" Foreground="#888"/><TextBlock Text="{Binding Version}" Foreground="White" FontWeight="Bold" Grid.Column="1"/></Grid>
                                    <Grid ColumnDefinitions="*,Auto"><TextBlock Text="Dung lượng" Foreground="#888"/><TextBlock Text="{Binding Size}" Foreground="White" FontWeight="Bold" Grid.Column="1"/></Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>

                    <Grid Name="Step2_Folder" Classes="WizardStep" IsVisible="False">
                        <StackPanel VerticalAlignment="Center" Spacing="20" Margin="50,0">
                            <TextBlock Text="CHỌN THƯ MỤC GAME" HorizontalAlignment="Center" FontSize="22" FontWeight="Black" Foreground="White"/>
                            <Grid ColumnDefinitions="*, 90">
                                <TextBox Name="TxtFolderPath" Watermark="C:\Program Files (x86)..." Height="45" CornerRadius="6" Background="#1A1A1A" BorderBrush="#333" Foreground="White" VerticalContentAlignment="Center"/>
                                <Button Name="BtnBrowse" Click="BrowseButton_Click" Grid.Column="1" Content="DUYỆT" Margin="10,0,0,0" HorizontalAlignment="Stretch" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Background="#333" Foreground="White" CornerRadius="6"/>
                            </Grid>
                        </StackPanel>
                    </Grid>

                    <Grid Name="Step3_Installing" Classes="WizardStep" IsVisible="False">
                        <StackPanel VerticalAlignment="Center" Spacing="40" Margin="50,0">
                            <TextBlock Text="ĐANG CÀI ĐẶT..." HorizontalAlignment="Center" FontSize="24" FontWeight="Bold" Foreground="White"/>
                            <StackPanel Spacing="10">
                                <Border Height="6" Background="#333" CornerRadius="3" ClipToBounds="True">
                                    <Border Name="ProgressBarFill" Width="0" HorizontalAlignment="Left" Background="{StaticResource PrimaryRed}" CornerRadius="3">
                                        <Border.Transitions><Transitions><DoubleTransition Property="Width" Duration="0:0:0.2"/></Transitions></Border.Transitions>
                                    </Border>
                                </Border>
                                <Grid ColumnDefinitions="*,*">
                                    <TextBlock Name="TxtStatus" Text="Initializing..." FontSize="12" Foreground="#666"/>
                                    <TextBlock Name="TxtPercent" Text="0%" FontSize="12" Foreground="{StaticResource PrimaryRed}" FontWeight="Bold" Grid.Column="1" HorizontalAlignment="Right"/>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <Grid Name="Step4_Success" Classes="WizardStep" IsVisible="False">
                        <StackPanel VerticalAlignment="Center" Spacing="20">
                            <TextBlock Text="✔" FontSize="60" Foreground="#4ade80" HorizontalAlignment="Center"/>
                            <TextBlock Text="HOÀN TẤT!" HorizontalAlignment="Center" FontSize="28" FontWeight="Black" Foreground="White"/>
                        </StackPanel>
                    </Grid>
                </Panel>

                <Border Grid.Row="2" Background="#1A1A1A" BorderBrush="#25FFFFFF" BorderThickness="0,1,0,0">
                    <Grid ColumnDefinitions="120, *, 160" Margin="30,0">
                        <Button Name="BtnBack" Content="Quay lại" Click="BackButton_Click" Background="Transparent" Foreground="#888" HorizontalAlignment="Left"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center"><Border Name="Dot1" Classes="StepDot Active"/><Border Name="Dot2" Classes="StepDot"/><Border Name="Dot3" Classes="StepDot"/></StackPanel>
                        <Panel Grid.Column="2">
                            <Button Name="BtnNext" Content="TIẾP TỤC" Click="NextButton_Click" Background="{StaticResource PrimaryRed}" Foreground="White" FontWeight="Bold" CornerRadius="6" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" Height="40" VerticalContentAlignment="Center"/>
                            <Button Name="BtnPlay" Content="CHƠI NGAY" IsVisible="False" Click="CloseButton_Click" Background="#4ade80" Foreground="Black" FontWeight="Bold" CornerRadius="6" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" Height="40" VerticalContentAlignment="Center"/>
                        </Panel>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>
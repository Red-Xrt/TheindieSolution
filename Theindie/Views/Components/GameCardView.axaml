<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="using:Theindie.Models"
             x:DataType="models:GameInfo"
             xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
             x:Class="Theindie.Views.Components.GameCardView">

    <UserControl.Styles>
        <Style Selector="Border.CardContainer">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="ClipToBounds" Value="True"/>
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="BorderBrush" Value="#30000000"/> 
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BoxShadow" Value="0 4 10 0 #40000000"/>
            <Setter Property="Transitions">
                <Transitions>
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                    <BoxShadowsTransition Property="BoxShadow" Duration="0:0:0.2"/>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2"/>
                </Transitions>
            </Setter>
        </Style>

        <Style Selector="Border.CardContainer:pointerover">
            <Setter Property="RenderTransform" Value="scale(1.03) translateY(-5px)"/>
            <Setter Property="BoxShadow" Value="0 0 0 2 #FF1F2F, 0 10 30 0 #60FF1F2F"/>
            <Setter Property="BorderBrush" Value="Transparent"/> 
        </Style>

        <Style Selector="Border.CoverOverlay">
            <Setter Property="Opacity" Value="0.3"/>
            <Setter Property="Transitions"><Transitions><DoubleTransition Property="Opacity" Duration="0:0:0.2"/></Transitions></Setter>
        </Style>
        
        <Style Selector="Border.CardContainer:pointerover Border.CoverOverlay">
            <Setter Property="Opacity" Value="0.9"/>
        </Style>

        <Style Selector="Border.PlayButton">
            <Setter Property="Opacity" Value="0"/>
            <Setter Property="ScaleTransform.ScaleX" Value="0.8"/>
            <Setter Property="ScaleTransform.ScaleY" Value="0.8"/>
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.2"/>
                    <DoubleTransition Property="ScaleTransform.ScaleX" Duration="0:0:0.2" Easing="BackEaseOut"/>
                    <DoubleTransition Property="ScaleTransform.ScaleY" Duration="0:0:0.2" Easing="BackEaseOut"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Border.CardContainer:pointerover Border.PlayButton">
            <Setter Property="Opacity" Value="1"/>
            <Setter Property="ScaleTransform.ScaleX" Value="1"/>
            <Setter Property="ScaleTransform.ScaleY" Value="1"/>
        </Style>
    </UserControl.Styles>

    <Border Classes="CardContainer" Margin="10" PointerPressed="OnPointerPressed">
        <Panel>
            <Image asyncImageLoader:ImageLoader.Source="{Binding ImagePath}" Stretch="UniformToFill"/>
            
            <Border Classes="CoverOverlay">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Offset="0.3" Color="Transparent"/>
                        <GradientStop Offset="1" Color="#050505"/> </LinearGradientBrush>
                </Border.Background>
            </Border>

            <Border VerticalAlignment="Bottom" Padding="15">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,0,8">
                        <Border IsVisible="{Binding IsVietHoa}" Background="{StaticResource PrimaryRed}" CornerRadius="4" Padding="6,3">
                            <TextBlock Text="VIỆT HÓA" FontSize="9" FontWeight="Bold" Foreground="White"/>
                        </Border>
                        <Border IsVisible="{Binding IsInstalled}" Background="#4ade80" CornerRadius="4" Padding="6,3">
                            <StackPanel Orientation="Horizontal" Spacing="4">
                                <PathIcon Data="{StaticResource IconCheck}" Width="8" Height="8" Foreground="Black"/>
                                <TextBlock Text="ĐÃ CÀI" FontSize="9" FontWeight="Bold" Foreground="Black"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    
                    <TextBlock Text="{Binding Title}" FontWeight="Black" FontSize="18" Foreground="White" TextTrimming="CharacterEllipsis"/>
                    <TextBlock Text="{Binding Tags}" FontSize="12" Foreground="#999" Margin="0,4,0,0" TextTrimming="CharacterEllipsis"/>
                </StackPanel>
            </Border>

            <Border Classes="PlayButton" HorizontalAlignment="Center" VerticalAlignment="Center"
                    Width="50" Height="50" CornerRadius="25" Background="#80000000"
                    BorderBrush="{StaticResource PrimaryRed}" BorderThickness="2">
                <PathIcon Data="{StaticResource IconPlay}" Foreground="White" Width="20" Height="20" Margin="3,0,0,0"/>
            </Border>
        </Panel>
    </Border>
</UserControl>